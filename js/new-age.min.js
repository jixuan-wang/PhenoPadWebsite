/*!
 * Start Bootstrap - New Age v5.0.0 (https://startbootstrap.com/template-overviews/new-age)
 * Copyright 2013-2018 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-new-age/blob/master/LICENSE)
 */

! function(e) {
    "use strict";
    e('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function() {
        if (location.pathname.replace(/^\//, "") == this.pathname.replace(/^\//, "") && location.hostname == this.hostname) {
            var a = e(this.hash);
            if ((a = a.length ? a : e("[name=" + this.hash.slice(1) + "]")).length) return e("html, body").animate({
                scrollTop: a.offset().top - 48
            }, 1e3, "easeInOutExpo"), !1
        }
    }), e(".js-scroll-trigger").click(function() {
        e(".navbar-collapse").collapse("hide")
    }), e("body").scrollspy({
        target: "#mainNav",
        offset: 54
    });
    var a = function() {
        var h = $(window).height() - 50;
        h < e("#mainNav").offset().top ? e("#mainNav").addClass("navbar-shrink") : e("#mainNav").removeClass("navbar-shrink");
    };
    a(), e(window).scroll(a)
    window.addEventListener('scroll',function(){
        document.getElementById('head').style.backgroundPosition = ('0 '+ -1 * e("#mainNav").offset().top * 0.3 +'pt');
        var $parallaxElement = $('#head');
        var elementHeight = $parallaxElement.outerHeight();
        var scrollPos = $(window).scrollTop();
        var opacityValue =  1 - ( scrollPos / 800.0);
  
        if ( scrollPos < elementHeight ) {
    
            $parallaxElement.css({
                'opacity': opacityValue,
                // '-webkit-filter' : 'blur('+blurValue+'px)'
            });
            }
    });
    //addes event listener to carousel and videos and plays only when scroll to position
    window.addEventListener('scroll',function(){
        var overview_carousel = document.getElementById('Overview');
        var actual_offset = e("#mainNav").offset().top;
        var bodyRect = document.body.getBoundingClientRect(),
            elemRect = overview_carousel.getBoundingClientRect(),
            offset   = elemRect.top - bodyRect.top - 0.2*$(window).height(),
            hwr_offset = document.getElementById('hwrVideo').getBoundingClientRect().top - bodyRect.top - (0.5* $(window).height()),
            speech_offset = document.getElementById('speechVideo').getBoundingClientRect().top - bodyRect.top - (0.5* $(window).height()),
            cds_offset = document.getElementById('cdsVideo').getBoundingClientRect().top - bodyRect.top - (0.5* $(window).height()),
            addin1_offset = document.getElementById('addinVideo1').getBoundingClientRect().top - bodyRect.top - (0.5* $(window).height()),
            addin2_offset = document.getElementById('addinVideo1').getBoundingClientRect().top - bodyRect.top - (0.6* $(window).height());

        //triggers each of the following event based on windows scroll offset
        if (actual_offset > offset - 10 && actual_offset < offset + 10){
            $("#Overview").carousel("cycle");
            $("#Overview").carousel("next");
        }
        if (actual_offset >= hwr_offset){
            document.getElementById('hwrVideo').click();
            document.getElementById('hwrVideo').play();
        }
        if (actual_offset >= speech_offset){
            document.getElementById('speechVideo').play();
        }
        if (actual_offset >= cds_offset){
            document.getElementById('cdsVideo').play();
        }
        if (actual_offset >= addin1_offset){
            document.getElementById('addinVideo1').play();
        }
        if (actual_offset >= addin2_offset){
            document.getElementById('addinVideo2').play();
        }

    });
    //adds some event listener to when page is initially loaded
    window.addEventListener('load',function(){
        this.console.log("initializing carousel to paused state.");
        $("#Overview").carousel({interval:1000});
        $("#Overview").carousel(0);
        $("#Overview").carousel('pause');
    });
}(jQuery);